language: cpp

matrix:
  include:
    - os: linux
      dist: trusty
      sudo: false
    - os: osx      

compiler: 
 # - gcc
  - clang

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - openssl 
      - libssl-dev
    #  - g++-7 

before_install:
  - pip install --user cpp-coveralls

script:
  #- CXX=/usr/bin/g++-7 CC=/usr/bin/gcc-7 cmake -DCOVERAGE=1 .
  - cmake .
  - cmake --build .
  # run Gtest
  - ./bin/Ark-Cpp-tests
  
after_success:
  - coveralls --root . -E ".*gtest.*" -E ".*CMakeFiles.*"
  
